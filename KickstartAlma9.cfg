# Generated by Anaconda 34.25.1.14
# Generated by pykickstart v3.32
#version=RHEL9
# Use text and not graphical install
text

%addon com_redhat_kdump --enable --reserve-mb='auto'

%end

# Keyboard layouts
keyboard --xlayouts='fr (oss)'
# System language
lang fr_FR.UTF-8

# Network information
network  --bootproto=dhcp --device=ens18 --noipv6 --activate

# Use CDROM installation media
cdrom

# Add repo appstream
repo --name="AppStream" --mirrorlist https://mirrors.almalinux.org/mirrorlist/$releasever/appstream

%packages
@^minimal-environment
cloud-init

%end

# Run the Setup Agent on first boot
firstboot --enable

# Generated using Blivet version 3.4.0
ignoredisk --only-use=sda,sdb,sdc
# System bootloader configuration
bootloader --append="crashkernel=1G-4G:192M,4G-64G:256M,64G-:512M" --location=mbr --boot-drive=sda
# Partition clearing information
clearpart --initlabel --drives=sda,sdb,sdc --all
# Disk partitioning information
part /boot --fstype="xfs" --ondisk=sda --size=1024
part /boot/efi --fstype="efi" --ondisk=sda --size=600 --fsoptions="umask=0077,shortname=winnt"
part pv.6016 --grow --onpart=sdb
part pv.8409 --grow --onpart=sdc
volgroup vg_sys --pesize=4096 pv.6016
volgroup vg_srv --pesize=4096 pv.8409
logvol /var --fstype="xfs" --size=3072 --name=lv_var --vgname=vg_sys
logvol /var/log/audit --fstype="xfs" --size=512 --name=lv_var_log_audit --vgname=vg_sys
logvol /opt --fstype="xfs" --size=64 --name=lv_opt --vgname=vg_sys
logvol swap --fstype="swap" --size=1024 --name=lv_swap --vgname=vg_sys
logvol /usr --fstype="xfs" --size=5120 --name=lv_usr --vgname=vg_sys
logvol /srv --fstype="xfs" --size=64 --name=lv_srv --vgname=vg_srv
logvol /home --fstype="xfs" --size=512 --name=lv_home --vgname=vg_sys
logvol / --fstype="xfs" --size=1024 --name=lv_root --vgname=vg_sys
logvol /var/log --fstype="xfs" --size=1024 --name=lv_var_log --vgname=vg_sys
logvol /var/tmp --fstype="xfs" --size=512 --name=lv_var_tmp --vgname=vg_sys
logvol /tmp --fstype="xfs" --size=512 --name=lv_tmp --vgname=vg_sys

# System timezone
timezone Europe/Paris --utc

# Root password
rootpw --iscrypted $6$t6Fx37e2K0UTcz75$.7hdWMSjXBRM0r47bEyxcwUMkOMHCuhth9fLecp3DZNcNnlXXVhb4.5JJzYqdUE96eHU0CdRhdC8Hy1byX/IV1

# Accept EULA and reboot
eula --agreed
reboot
